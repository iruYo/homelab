authentik:
  secret_key: ""

  postgresql:
    host: "postgres18-rw.cloudnative-pg.svc"
    name: "authentik"
    port: 5432

  envValueFrom:
    AUTHENTIK_POSTGRESQL__USER:
      secretKeyRef:
        name: "authentik-postgres-credentials"
        key: "AUTHENTIK_POSTGRESQL__USER"
    AUTHENTIK_POSTGRESQL__PASSWORD:
      secretKeyRef:
        name: "authentik-postgres-credentials"
        key: "AUTHENTIK_POSTGRESQL__PASSWORD"

server:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: storage
                operator: In
                values:
                  - "true"

  route:
    main:
      enabled: true
      hostnames:
        - "auth.${DOMAIN}"
      parentRefs:
        - name: gateway-internal
          namespace: network

global:
  envFrom:
    - secretRef:
        name: authentik-secret-key
    - secretRef:
        name: authentik-postgres-password
    - secretRef:
        name: authentik-bootstrap-token

worker:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: storage
                operator: In
                values:
                  - "true"
